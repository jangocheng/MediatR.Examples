<div class="row">
    <div id="view-offer-header" class="col-md-12">
        <h2 class="page-header" translate="OFFER.VIEW.VIEW_OFFER"></h2>
        <div class="well">
            <button type="button" class="btn btn-default pull-right" ng-click="vm.goToEdit()"><i class="fa fa-pencil"></i> <span translate="COMMON.EDIT"></span></button>
            <div>
                <span class="offer-status offer-status-{{vm.offer.statusId | dynamicTranslate | lowercase}}">{{vm.offer.statusId | dynamicTranslate}}</span>
                <span class="offer-title">{{vm.offer.requirement.getContactNames()}}</span>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <section id="section-vendor">
            <h3 class="page-header" translate="OFFER.VIEW.VENDOR"></h3>

            <h5 translate="OFFER.PREVIEW.ACTIVITY"></h5>
            <card-list-item class="requirement-view-offers">
                <card show-context-menu="true" show-item-details="vm.showActivityPreview" display-new-control="true"
                      card-template-url="'app/offer/view/offerVendorCard.html'" item="vm.offer">
                    <card-context-menu>
                        <context-menu-item type="details" item="vm.offer.activity" action="vm.navigateToActivity"></context-menu-item>
                    </card-context-menu>
                </card>
            </card-list-item>
        </section>
        <section id="section-applicant">
            <h3 class="page-header" translate="OFFER.VIEW.APPLICANT"></h3>

            <h5 translate="VIEWING.ADD.REQUIREMENT"></h5>
            <card-list-item class="requirement-view-offers">
                <card show-context-menu="true" display-new-control="true"
                      card-template-url="'app/offer/view/offerRequirementCard.html'" item="vm.offer">
                    <card-context-menu>
                        <context-menu-item type="details" item="vm.offer.requirement" action="vm.navigateToRequirement"></context-menu-item>
                    </card-context-menu>
                </card>
            </card-list-item>
        </section>
    </div>
    <div class="col-md-4">
        <section id="section-basic-information">
            <h3 class="page-header" translate="OFFER.VIEW.BASIC_INFORMATION"></h3>

            <div class="section-details">
                <div class="section-row row">
                    <div class="section-title col-xs-6">Status</div>
                    <div class="col-xs-6">{{vm.offer.statusId | dynamicTranslate}}</div>
                </div>
                <div class="section-row row">
                    <div class="section-title col-xs-6">Offer</div>
                    <div class="col-xs-6">{{vm.offer.price | number : 2 }} GBP</div>
                </div>
                <div class="section-row row">
                    <div class="section-title col-xs-6">Offer date</div>
                    <div class="col-xs-6"><time>{{vm.offer.offerDate | date : 'dd-MM-yyyy'}}</time></div>
                </div>
            </div>
            <div class="section-details">
                <div class="section-row row">
                    <div class="section-title col-xs-12">
                        <h5>Special conditions</h5>
                    </div>
                    <div class="col-xs-12">
                        <p>{{vm.offer.specialConditions}}</p>
                    </div>
                </div>
            </div>
            <div class="section-details">
                <div class="section-row row">
                    <div class="section-title col-xs-6" translate="OFFER.PREVIEW.EXCHANGE_DATE"></div>
                    <div class="col-xs-6"><time>{{vm.offer.exchangeDate | date : 'dd-MM-yyyy'}}</time></div>
                </div>
                <div class="section-row row">
                    <div class="section-title col-xs-6" translate="OFFER.PREVIEW.COMPLETION_DATE"></div>
                    <div class="col-xs-6"><time>{{vm.offer.completionDate | date : 'dd-MM-yyyy'}}</time></div>
                </div>
            </div>
            <div class="section-details">
                <div class="section-row row">
                    <div class="col-xs-12">
                        <h5 translate="OFFER.PREVIEW.NEGOTIATOR"></h5>
                    </div>
                    <div class="col-xs-12">
                        <div class="panel panel-default applicant">
                            <div class="panel-body">
                                {{ vm.offer.negotiator.getName() }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upward chain -->
        <section>
            <h3 class="page-header">Upward chain</h3>

            <div class="form-group">
                <button type="button" class="btn btn-default"><i class="fa fa-plus-circle"></i></button>
            </div>

            <card-list-item class="chain-list">
                <card show-context-menu="true" show-item-details="" display-new-control="true"
                      card-template-url="'app/offer/templates/chainCard.html'" item="">
                    <card-context-menu>
                        <context-menu-item type="details" item="" action=""></context-menu-item>
                    </card-context-menu>
                </card>

                <card show-context-menu="true" show-item-details="" display-new-control="true"
                      card-template-url="'app/offer/templates/chainCard.html'" item="">
                    <card-context-menu>
                        <context-menu-item type="details" item="" action=""></context-menu-item>
                    </card-context-menu>
                </card>

                <card show-context-menu="true" show-item-details="" display-new-control="true"
                      card-template-url="'app/offer/templates/chainCard.html'" item="">
                    <card-context-menu>
                        <context-menu-item type="details" item="" action=""></context-menu-item>
                    </card-context-menu>
                </card>

                <card show-context-menu="false" show-item-details="" display-new-control="true"
                      card-template-url="'app/offer/templates/chainCard.html'" item="">
                </card>
            </card-list-item>
        </section>
        <!-- // Upward chain -->

    </div>
</div>

<side-panel component-id="vm.componentIds.activityPreviewSidePanelId">
    <side-panel-header>
        <h3 translate="ACTIVITY.PREVIEW.ACTIVITYPREVIEW"></h3>
    </side-panel-header>
    <side-panel-content>
        <div class="row section-row">
            <div class="col-xs-5">
                <a ui-sref="app.activity-view({id: vm.offer.activity.id})" translate="ACTIVITY.PREVIEW.ACTIVITY_VIEW_LINK"></a>
            </div>
        </div>
        <div class="row section-row">
            <div class="col-xs-12">
                <h4 translate="OFFER.VIEW.BASIC_INFORMATION"></h4>
            </div>
        </div>
        <div class="row section-row">
            <div class="col-xs-5" translate="ACTIVITY.PREVIEW.STATUS"></div>
            <div class="col-xs-7" id="activity-preview-status">{{vm.offer.activity.activityStatusId | dynamicTranslate}} </div>
        </div>
        <div class="row section-row">
            <div class="col-xs-5" translate="OFFER.PREVIEW.NEGOTIATOR"></div>
            <div class="col-xs-7" id="activity-preview-negotiator">{{vm.offer.negotiator.getName()}} </div>
        </div>
        <div class="row section-row">
            <div class="col-xs-5" translate="ACTIVITY.PREVIEW.CREATION_DATE"></div>
            <div class="col-xs-7" id="activity-preview-created-date">{{vm.offer.activity.createdDate | date : 'dd-MM-yyyy'}}</div>
        </div>
        <div class="row section-row">
            <div class="col-xs-5" translate="ACTIVITY.PREVIEW.VENDORS"></div>
            <div class="col-xs-7" id="activity-preview-vendors">
                <div class="row">
                    <div class="col-md-12" id="activity-preview-vendor-item-{{contact.id}}" ng-repeat="contact in vm.offer.activity.contacts track by $id(contact)">
                        {{contact.getName()}}
                    </div>
                </div>
            </div>
        </div>
        <div class="row section-row">
            <div class="col-xs-5" translate="ACTIVITY.PREVIEW.TYPE"></div>
            <div class="col-xs-7" id="activity-preview-type">{{vm.offer.activity.activityTypeId | dynamicTranslate}} </div>
        </div>
    </side-panel-content>
</side-panel>

<!-- Chain transaction detailt -->
<kf-side-panel>
    <side-panel-cards>
        <kf-side-panel-card>
            <side-panel-header>
                <h3>Chain transaction details</h3>
            </side-panel-header>
            <side-panel-content>
                <div class="side-panel-nav">
                    <a href="#" class="side-panel-prev text-small">Previous</a>
                    <a href="#" class="side-panel-next pull-right">Next</a>
                </div>
                <div class="section-details">
                    <h5>Property</h5>
                    <div class="card card-no-menu card-details">
                        <div class="card-body">
                            <div class="card-item">
                                123 Knightsbridge <i class="fa fa-external-link" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section-details">
                    <h5>Vendor</h5>
                    <div class="card card-no-menu">
                        <div class="card-body">
                            <div class="card-item">
                                John Vendor
                            </div>
                        </div>
                    </div>
                    <h5>Buyer</h5>
                    <div class="card card-no-menu">
                        <div class="card-body">
                            <div class="card-item">
                                Theodore Buyer
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section-details">
                    <h5>Agent</h5>
                    <div class="card card-no-menu">
                        <div class="card-body">
                            <div class="card-item">
                                Abraham Lincoln
                            </div>
                            <div class="card-info">
                                Lorem ipsum department
                            </div>
                        </div>
                    </div>
                    <h5>Solicitor</h5>
                    <div class="card card-no-menu">
                        <div class="card-body">
                            <div class="card-item">
                                Stuart Little
                            </div>
                            <div class="card-info">
                                EEE Company
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section-details">
                    <h4>Progress</h4>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Mortgage</div>
                        <div class="col-xs-6"><span class="status status-not-required">Not required</span></div>
                    </div>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Survey</div>
                        <div class="col-xs-6"><span class="status status-outstanding">Outstanding</span></div>
                    </div>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Survey date</div>
                        <div class="col-xs-6"><time>12-06-2016</time></div>
                    </div>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Searches</div>
                        <div class="col-xs-6"><span class="status status-complete">Complete</span></div>
                    </div>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Enquiries</div>
                        <div class="col-xs-6"><span class="status status-complete">Complete</span></div>
                    </div>
                    <div class="section-row row">
                        <div class="section-title col-xs-5">Contract agreed</div>
                        <div class="col-xs-6"><span class="status status-no">No</span></div>
                    </div>
                </div>
            </side-panel-content>
            <side-panel-footer>
                <button type="button" class="btn btn-default pull-left">
                    <i class="fa fa-pencil"></i> <span translate="COMMON.EDIT"></span>
                </button>
            </side-panel-footer>
        </kf-side-panel-card>
        <busy is-busy="vm.isBusy" label="{{'COMMON.LOADING' | translate}}"></busy>
    </side-panel-cards>
</kf-side-panel>
<!-- // Chain transaction details -->

<!-- Chain transaction -->
<!-- Change id's for edit panel -->
<kf-side-panel>
    <side-panel-cards>
        <form action="#">
            <kf-side-panel-card>
                <side-panel-header>
                    <h3>Chain transaction</h3>
                </side-panel-header>
                <side-panel-content>
                    <div class="form-group">
                        <label class="checkbox-inline">
                            <input type="checkbox"> <span>End of chain</span>
                        </label>
                    </div>
                    <div class="section-details">
                        <div class="form-group">
                            <h5 class="required">Property</h5>
                            <button type="button" class="btn btn-default">
                                <i class="fa fa-plus-circle"></i>
                            </button>
                        </div>
                        <div class="form-group">
                            <label for="create-vendor" class="required">Vendor</label>
                            <input type="text" id="create-vendor" class="form-control" placeholder="Name and Surname">
                        </div>
                        <div class="form-group">
                            <h5 class="required">Agent</h5>
                            <div class="form-group">
                                <label class="radio-inline">
                                    <input type="radio" value=""> <span>Knight Frank</span>
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" value=""> <span>3rd party</span>
                                </label>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-default">
                                    <i class="fa fa-plus-circle"></i>
                                </button>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-default">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Find a negotiator">
                            </div>
                            <div class="card card-no-menu">
                                <div class="card-body">
                                    <div class="card-item">John Smith</div>
                                    <div class="card-info">Lorem ipsum department</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <h5>Solicitor</h5>
                            <div class="form-group">
                                <button type="button" class="btn btn-default">
                                    <i class="fa fa-plus-circle"></i>
                                </button>
                            </div>
                            <div class="card card-no-menu">
                                <div class="card-body">
                                    <div class="card-item">John Smith</div>
                                    <div class="card-info">Lorem ipsum department</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h4>Progress</h4>
                    <div class="section-details">
                        <div class="form-group">
                            <label for="create-mortgage" class="required">Mortgage</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <select id="create-mortgage" class="form-control">
                                        <option value="#">Unknown</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="create-survey" class="required">Survey</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <select id="create-survey" class="form-control">
                                        <option value="#">Unknown</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="create-survey-date">Survey dates</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <input type="text" id="create-survey-date" class="form-control" placeholder="dd-mm-yyyy">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="create-searches" class="required">Searches</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <select id="create-searches" class="form-control">
                                        <option value="#">Unknown</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="create-enquiries" class="required">Enquiries</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <select id="create-enquiries" class="form-control">
                                        <option value="#">Unknown</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="create-contact-agreed" class="required">Contract agreed</label>
                            <div class="row">
                                <div class="col-md-8">
                                    <select id="create-contact-agreed" class="form-control">
                                        <option value="#">Unknown</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </side-panel-content>
                <side-panel-footer>
                    <button class="btn btn-default" type="button">
                        <i class="fa fa-ban"></i> <span translate="COMMON.CANCEL"></span>
                    </button>
                    <button class="btn btn-primary" type="submit" ng-click="vm.updateContacts()">
                        <i class="fa fa-floppy-o"></i> <span translate="COMMON.SAVE"></span>
                    </button>
                </side-panel-footer>
            </kf-side-panel-card>
        </form>
        <busy is-busy="vm.isBusy" label="{{'COMMON.LOADING' | translate}}"></busy>
    </side-panel-cards>
</kf-side-panel>
<!-- // Chain transaction -->
